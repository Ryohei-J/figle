# figle - 要件定義書

## 1. プロジェクト概要

### 1.1 プロダクト名
figle

### 1.2 目的
LEGOミニフィグの検索・閲覧、およびコレクション管理を行うWebアプリケーション

### 1.3 ターゲットユーザー
個人のLEGOコレクター（不特定多数への一般公開）

---

## 2. 機能要件

### 2.1 Phase 1: ミニフィグ閲覧機能（ログイン不要）

| 機能 | 説明 |
|------|------|
| ミニフィグ一覧表示 | 全ミニフィグをグリッド形式で表示 |
| ミニフィグ詳細表示 | 個別ミニフィグの詳細情報を表示 |
| ソート | 発売年月でのソート |
| 検索 | キーワードによる検索（将来拡張） |

#### 表示するミニフィグ情報
- 名前
- 画像
- 発売年月（ミニフィグが含まれるセットを元に算出）

### 2.2 Phase 2: コレクション管理機能（要ログイン）

| 機能 | 説明 |
|------|------|
| Googleログイン | Google認証によるユーザー認証 |
| マイコレクション | 所持しているミニフィグの登録・管理 |
| ウィッシュリスト | 欲しいミニフィグの登録・管理 |

#### マイコレクションの登録情報
- ミニフィグID
- 所有数

#### ウィッシュリストの登録情報
- ミニフィグID
- （優先度機能は不要）

### 2.3 Phase 3: ソーシャル機能（将来実装）

| 機能 | 説明 |
|------|------|
| コレクション公開 | 他ユーザーへのコレクション公開（デフォルト公開） |
| コレクション比較 | 他ユーザーとのコレクション比較 |

---

## 3. 非機能要件

### 3.1 対応デバイス
- PC（デスクトップ）
- スマートフォン（モバイル）
- レスポンシブデザインで両対応

### 3.2 パフォーマンス
- サクサク動作することを重視
- 約13,000件以上のミニフィグデータを全件扱う

### 3.3 多言語対応
- Phase 1: 日本語
- 将来: 英語対応

---

## 4. 画面構成

| 画面 | 説明 | 認証 |
|------|------|------|
| トップページ | ミニフィグ一覧（グリッド表示） | 不要 |
| ミニフィグ詳細 | 個別ミニフィグの詳細情報 | 不要 |
| マイコレクション | 所持ミニフィグ一覧・管理 | 必要 |
| ウィッシュリスト | 欲しいミニフィグ一覧・管理 | 必要 |

---

## 5. 技術構成

### 5.1 フロントエンド
- Next.js 16
- React 19
- Tailwind CSS 4
- TypeScript

### 5.2 バックエンド
- Next.js API Routes
- NextAuth.js（Google認証）
- Prisma ORM

### 5.3 データベース
- Neon（PostgreSQL）

### 5.4 ホスティング
- Vercel

### 5.5 データソース
- Rebrickable（ミニフィグマスターデータ）
- CSVダウンロード → JSON変換 → プッシュの定期実行（深夜）
- 実行環境: GitHub Actions または AWS Lambda（別途検討）

---

## 6. 認証・権限

| ユーザー種別 | 権限 |
|-------------|------|
| ゲスト（未ログイン） | ミニフィグの検索・閲覧のみ |
| ログインユーザー | 上記 + コレクション管理、ウィッシュリスト管理 |

---

## 7. データモデル（概要）

### User
- id
- Google認証情報

### Minifig（マスターデータ）
- id（Rebrickable ID）
- name
- image_url
- release_date

### Collection
- user_id
- minifig_id
- quantity（所有数）

### Wishlist
- user_id
- minifig_id

---

## 8. 開発フェーズ

| フェーズ | 内容 | 状態 |
|---------|------|------|
| Phase 1 | ミニフィグ一覧・検索・閲覧 | 開発中 |
| Phase 2 | Googleログイン、マイコレクション、ウィッシュリスト | 未着手 |
| Phase 3 | 他ユーザーとのコレクション共有・比較 | 未着手 |
